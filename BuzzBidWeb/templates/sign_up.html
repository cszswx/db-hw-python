{% extends "base.html" %} 
{% block title %}Sign Up{% endblock %} 
{% block content%}

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div align="center">
      {% for category, message in messages %}
        <div class="alert alert-{{ category }}" role="alert">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}
<br/>
<h3 align="center">BuzzBid New User Registration</h3>

<form method="POST" action="">
    {{ form.hidden_tag() }}
    
    <div align="center">
      <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Login Icon" style="margin-bottom: 20px;">
    </div>

    {{ form.first_name.label(class="form-label")}}
    {{ form.first_name(class="form-control") }}

    {{ form.last_name.label(class="form-label")}}
    {{ form.last_name(class="form-control") }}

    {{ form.username.label(class="form-label")}}
    {{ form.username(class="form-control") }}

    {{ form.psw1.label(class="form-label")}}
    {{ form.psw1(class="form-control") }}

    {{ form.psw2.label(class="form-label")}}
    {{ form.psw2(class="form-control") }}

    <br/>
    <!-- Added JavaScript to handle the cancel button click -->
    <button type="button" class="btn btn-secondary" onclick="window.location='{{ url_for('auth.login') }}'">Cancel</button>
    {{ form.register(class="btn btn-primary") }}
</form>
    
<script>
document.addEventListener('DOMContentLoaded', (event) => {
  setTimeout(() => {
    const alerts = document.querySelectorAll('.alert');
    alerts.forEach(alert => {
      alert.style.opacity = '0';
      setTimeout(() => alert.style.display = 'none', 600); 
    });
  }, 4000); // 4000 ms = 4 seconds
});
</script>
{% endblock %}